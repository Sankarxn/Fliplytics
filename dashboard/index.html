<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fliplytics Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">F</span>
                <span class="logo-text">Fliplytics</span>
            </div>
            <nav class="nav">
                <ul>
                    <li class="active" data-view="overview">
                        <span class="icon">üìä</span> Overview
                    </li>
                    <li data-view="orders">
                        <span class="icon">üì¶</span> Orders
                    </li>
                    <li data-view="brands">
                        <span class="icon">üè∑Ô∏è</span> Analytics
                    </li>
                    <li data-view="instructions">
                        <span class="icon">‚ÑπÔ∏è</span> Instructions
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <p>v1.3</p>
                <p style="font-size:11px; margin-top:4px; opacity:0.8;">Developed with ‚ù§Ô∏è from Kerala</p>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="page-title">
                    <h1 id="pageTitle">Overview</h1>
                    <p class="subtitle">Track your Flipkart spending habits with Fliplytics</p>
                </div>
                <div class="actions">
                    <button id="syncBtn" class="btn-primary">
                        <span class="icon">üîÑ</span> Sync Orders
                    </button>
                </div>
            </header>

            <!-- Filters -->
            <div class="filter-bar">
                <span class="filter-label">Time Period:</span>
                <div class="filter-group">
                    <button class="filter-btn active" data-period="all">All Time</button>
                    <button class="filter-btn" data-period="last-month">Last Month</button>
                    <button class="filter-btn" data-period="last-3-months">Last 3 Months</button>
                    <button class="filter-btn" data-period="last-year">Last Year</button>
                    <button class="filter-btn" data-period="last-2-years">Last 2 Years</button>
                </div>
            </div>

            <!-- Views -->
            <div id="view-overview" class="view-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon income">üí∞</div>
                        <div class="stat-info">
                            <h3>Total Spent</h3>
                            <p class="value" id="totalSpent">‚Çπ0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orders">üì¶</div>
                        <div class="stat-info">
                            <h3>Total Orders</h3>
                            <p class="value" id="totalOrders">0</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon avg">üìà</div>
                        <div class="stat-info">
                            <h3>Avg Order Value</h3>
                            <p class="value" id="avgOrder">‚Çπ0</p>
                        </div>
                    </div>
                </div>

                <div class="charts-row">
                    <div class="chart-card large">
                        <h3>Spending Trend</h3>
                        <div class="chart-wrapper">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card small">
                        <h3>Category Split</h3>
                        <div class="chart-wrapper">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="table-card">
                    <h3>Recent Transactions</h3>
                    <div class="table-responsive">
                        <table id="recentOrdersTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody><!-- JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-orders" class="view-section" style="display:none;">
                <div class="table-card full">
                    <div class="table-header">
                        <h3>All Orders</h3>
                        <input type="text" id="orderSearch" placeholder="Search orders..." class="search-input">
                    </div>
                    <div class="table-responsive">
                        <table id="allOrdersTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Product</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody><!-- JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-brands" class="view-section" style="display:none;">
                <div class="table-card full">
                    <h3>Category & Brand Analysis</h3>
                    <div class="table-responsive">
                        <table id="brandsTable">
                            <thead>
                                <tr>
                                    <th>Brand</th>
                                    <th>Total Spent</th>
                                    <th>Order Count</th>
                                    <th>% of Total</th>
                                </tr>
                            </thead>
                            <tbody><!-- JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="view-instructions" class="view-section" style="display:none;">
                <div class="stat-card" style="display:block; max-width: 800px;">
                    <h3 style="margin-bottom:20px; font-size:18px;">How to use Fliplytics</h3>

                    <div style="margin-bottom: 24px;">
                        <h4 style="color:var(--primary); margin-bottom:8px;">1. Update Orders</h4>
                        <p style="color:var(--text-muted); line-height:1.6;">
                            Click the <strong>Sync Orders</strong> button in the top right corner. The extension will
                            automatically fetch your order history from Flipkart in the background.
                            <br><em>Make sure you are logged into Flipkart.</em>
                        </p>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <h4 style="color:var(--primary); margin-bottom:8px;">2. View Your Spending</h4>
                        <p style="color:var(--text-muted); line-height:1.6;">
                            Once syncing is complete, the dashboard will update with your lifetime spending, total
                            orders, and average order value.
                        </p>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <h4 style="color:var(--primary); margin-bottom:8px;">3. Filter by Time</h4>
                        <p style="color:var(--text-muted); line-height:1.6;">
                            Use the buttons at the top (All Time, Last Year, etc.) to see expenses for specific periods.
                        </p>
                    </div>

                    <div style="margin-bottom: 24px;">
                        <h4 style="color:var(--primary); margin-bottom:8px;">4. Analyze Brands</h4>
                        <p style="color:var(--text-muted); line-height:1.6;">
                            Check the <strong>Analytics</strong> tab to see which brands you spend the most on.
                        </p>
                    </div>

                    <div style="padding:12px; background:#fff7ed; border-left:4px solid #f97316; border-radius:4px;">
                        <p style="margin:0; font-size:13px; color:#c2410c;">
                            <strong>Note:</strong> Cancelled and Returned orders are automatically excluded from the
                            calculations.
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>